"use strict";
var metadata_loaders_1 = require("./metadata-loaders");
function makeQueryResolver(queryMap, superTypeMap) {
    if (queryMap === void 0) { queryMap = metadata_loaders_1.loadQueries(); }
    if (superTypeMap === void 0) { superTypeMap = metadata_loaders_1.loadSuperTypes(); }
    return function (queryName, qualifiedStructureName) {
        var currentQSN = qualifiedStructureName;
        while (!(
        /* stop: */ currentQSN === undefined || (queryMap[currentQSN] && queryMap[currentQSN][queryName]))) {
            currentQSN = superTypeMap[currentQSN];
        }
        return (currentQSN && queryMap[currentQSN] && queryMap[currentQSN][queryName])
            ? queryMap[currentQSN][queryName]
            : undefined;
    };
}
exports.makeQueryResolver = makeQueryResolver;
